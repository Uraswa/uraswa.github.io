import{Q as u}from"./QInput-Btel-I0Z.js";import{Q as c}from"./QBtn-pM70w-aC.js";import{A as n,Q as g}from"./Api-D8PYz5_c.js";import{C as f}from"./CenteredFormPage-DK4OjGo6.js";import{_,k as h,l as i,m as p,q as w,f as o,A as k,n as b,F as x,u as l,p as y,t as C}from"./index-XG3ruBr1.js";import"./vm-CHOWyN6_.js";import"./render-CGS6HGWU.js";import"./QSpinner-CfICFpvI.js";import"./uid-Bzmka5Fh.js";import"./use-dark-Dv7WjADU.js";import"./focus-manager-BJWzFvJg.js";import"./private.use-form-C3esKNPw.js";import"./use-router-link-BvR_uW70.js";import"./index-B9ygI19o.js";import"./QPage-CVl4ANdV.js";const V={name:"ChangePasswordPage",components:{CenteredFormPage:f},data(){return{password:"",is_loading:!1,err:""}},methods:{async onSubmit(){this.is_loading=!0;let s=await n.post("/api/users/changePassword",{password_change_token:this.$route.params.link,password:this.password});if(s.status===200&&s.data.success){let{accessToken:e,user_id:a}=s.data.data;n.setToken(e),this.$store.dispatch("setUserId",a),this.$router.push({path:"/"})}else this.err=s.data.error;this.is_loading=!1}}},P={class:"text-red"};function Q(s,e,a,B,t,m){const d=w("centered-form-page");return i(),h(d,null,{default:p(()=>[o(g,{style:{"min-width":"320px"},onSubmit:m.onSubmit,class:"q-gutter-md"},{default:p(()=>[o(u,{modelValue:t.password,"onUpdate:modelValue":e[0]||(e[0]=r=>t.password=r),label:"Пароль",type:"password",rules:[r=>!!r||"Введите пароль",r=>r.length<40||"Пароль слишком длинный"]},null,8,["modelValue","rules"]),t.err?(i(),k(x,{key:0},[l("span",P,C(t.err),1),e[1]||(e[1]=y()),e[2]||(e[2]=l("br",null,null,-1))],64)):b("",!0),o(c,{loading:t.is_loading,style:{"margin-top":"10px"},label:"Сменить пароль",type:"submit",color:"primary"},null,8,["loading"])]),_:1},8,["onSubmit"])]),_:1})}const H=_(V,[["render",Q]]);export{H as default};
