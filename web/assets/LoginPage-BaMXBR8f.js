import{Q as n}from"./QInput-ChrffT-T.js";import{Q as f}from"./QBtn-B-GJa1GX.js";import{A as m,Q as _}from"./Api-DdIO7rHx.js";import{C as h}from"./CenteredFormPage-5-bxJRux.js";import{_ as w,k as b,l as V,m as a,q as p,f as s,u as r,t as y,p as d}from"./index-cgLPpV2s.js";import"./vm-CqGj_DD0.js";import"./render-CaZ87jts.js";import"./QSpinner-Bv1sampE.js";import"./uid-Bzmka5Fh.js";import"./use-dark-CyN1B-s9.js";import"./focus-manager-BJWzFvJg.js";import"./private.use-form-BojlAJrN.js";import"./use-router-link-BRJrr1cX.js";import"./index-B9ygI19o.js";import"./QPage-yTJLfUB9.js";const c={name:"LoginPage",components:{CenteredFormPage:h},data:function(){return{email:"",password:"",error_auth:"",is_loading:!1}},methods:{onSubmit:async function(){this.is_loading=!0;let e=await m.post("/api/users/login",{email:this.email,password:this.password});if(e.status===200&&e.data.success){let{accessToken:t,user_id:l}=e.data.data;m.setToken(t),this.$store.dispatch("setUserId",l),this.$router.push({path:"/"})}else this.error_auth=e.data.error;this.is_loading=!1}}},k={class:"text-red"},C={style:{"margin-top":"10px"}};function P(e,t,l,Q,S,u){const i=p("RouterLink"),g=p("CenteredFormPage");return V(),b(g,null,{default:a(()=>[s(_,{style:{"min-width":"320px"},onSubmit:u.onSubmit,class:"q-gutter-md"},{default:a(()=>[s(n,{modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=o=>e.email=o),label:"Email",rules:[o=>!!o||"Введите email",o=>o.length<256||"Email слишком длинный"]},null,8,["modelValue","rules"]),s(n,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=o=>e.password=o),label:"Пароль",type:"password",rules:[o=>!!o||"Введите пароль",o=>o.length<40||"Пароль слишком длинный"]},null,8,["modelValue","rules"]),r("span",k,y(e.error_auth),1),t[4]||(t[4]=r("br",null,null,-1)),s(f,{loading:e.is_loading,style:{"margin-top":"10px"},label:"Войти",type:"submit",color:"primary"},null,8,["loading"]),r("p",C,[s(i,{to:"/registration"},{default:a(()=>[...t[2]||(t[2]=[d("Регистрация",-1)])]),_:1})]),r("p",null,[s(i,{to:"/forgotPassword"},{default:a(()=>[...t[3]||(t[3]=[d("Забыли пароль?",-1)])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})}const j=w(c,[["render",P]]);export{j as default};
