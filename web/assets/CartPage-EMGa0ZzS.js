import{Q,a as x}from"./QBreadcrumbs-CdCtopj4.js";import{Q as y}from"./QCheckbox-Dx8B288R.js";import{Q as w}from"./QSpace-8TBbSRPb.js";import{Q as m}from"./QBtn-koL875r6.js";import{Q as b}from"./QSeparator-CISpJoKK.js";import{b as k,Q as c,a as p}from"./QItem-BsTpFfRH.js";import{Q as C}from"./QImg-HA-0NsUX.js";import{Q as V}from"./QBadge-CRXQA7SN.js";import{Q as I,a as P}from"./QCard-4fO1Q9fw.js";import{Q as B}from"./QPage-CJ3xkkYn.js";import{D as j}from"./DemoProductsGrid-B45XDFQ_.js";import{_ as D,k as _,l as d,m as a,q as A,f as e,u as s,n as g,A as f,F,B as S,p as v,t as o}from"./index-BEjTALk-.js";import"./vm--eZ70ppT.js";import"./render-aB4a5-JQ.js";import"./use-router-link-Cq-NLqy3.js";import"./use-dark-DTqIO902.js";import"./private.use-form-Boqh9F-H.js";import"./QSpinner-CxiNnyBb.js";import"./use-timeout-B-zsxKe2.js";const N={name:"CartPage",components:{DemoProductsGrid:j},data(){return{selectAll:!1,selectedItems:[],promoCode:"",cartItems:[{id:1,name:"Футболка темно-синяя однотонная",description:"Размер: M, Цвет: синий",image:"https://cdn.quasar.dev/img/parallax2.jpg",originalPrice:350,finalPrice:300,discount:10,quantity:2},{id:2,name:"Джинсы классические",description:"Размер: 32, Цвет: синий",image:"https://cdn.quasar.dev/img/parallax1.jpg",originalPrice:2500,finalPrice:2500,discount:0,quantity:1},{id:3,name:"Худи оверсайз",description:"Размер: L, Цвет: черный",image:"https://cdn.quasar.dev/img/mountains.jpg",originalPrice:1800,finalPrice:1500,discount:15,quantity:1}]}},computed:{selectedItemsCount(){return this.selectedItems.length},totalOriginalPrice(){return this.cartItems.filter(i=>this.selectedItems.includes(i.id)).reduce((i,t)=>i+t.originalPrice*t.quantity,0)},totalFinalPrice(){return this.cartItems.filter(i=>this.selectedItems.includes(i.id)).reduce((i,t)=>i+t.finalPrice*t.quantity,0)},totalDiscount(){return this.totalOriginalPrice-this.totalFinalPrice},deliveryPrice(){return this.totalFinalPrice>2e3?0:300},totalPrice(){return this.totalFinalPrice+this.deliveryPrice}},watch:{selectAll(i){i?this.selectedItems=this.cartItems.map(t=>t.id):this.selectedItems=[]},selectedItems(i){this.selectAll=i.length===this.cartItems.length&&this.cartItems.length>0}},methods:{increaseQuantity(i){const t=this.cartItems.find(u=>u.id===i);t&&t.quantity++},decreaseQuantity(i){const t=this.cartItems.find(u=>u.id===i);t&&t.quantity>1&&t.quantity--},removeItem(i){this.cartItems=this.cartItems.filter(t=>t.id!==i),this.selectedItems=this.selectedItems.filter(t=>t!==i)}}},z={class:"row q-col-gutter-xl"},G={class:"col-8"},L={class:"row items-center q-mb-md"},O={class:"column q-gutter-y-lg"},E={class:"column items-end q-gutter-y-xs"},U={class:"text-h6 text-weight-bold text-primary"},M={key:0,class:"text-caption text-strike text-grey"},T={class:"column items-center q-gutter-y-xs"},H={class:"text-weight-medium"},J={class:"q-mt-xl"},K={class:"col-4"},R={class:"column q-gutter-y-md"},W={class:"column q-gutter-y-sm"},X={class:"row items-center justify-between"},Y={class:"text-caption text-grey-7"},Z={class:"text-caption"},$={class:"row items-center justify-between"},tt={class:"text-caption text-green"},et={class:"row items-center justify-between"},st={class:"text-caption"},it={key:0,class:"text-green"},lt={key:1},at={class:"row items-center justify-between"},ot={class:"text-h5 text-weight-bold text-primary"};function rt(i,t,u,dt,n,r){const q=A("DemoProductsGrid");return d(),_(B,{class:"q-pa-lg"},{default:a(()=>[e(Q,{class:"q-mb-xl"},{default:a(()=>[e(x,{label:"Главная",icon:"home"}),e(x,{label:"Корзина"})]),_:1}),t[6]||(t[6]=s("div",{class:"text-h4 text-weight-bold q-mb-lg"},"Корзина",-1)),s("div",z,[s("div",G,[e(I,{flat:"",bordered:""},{default:a(()=>[e(P,null,{default:a(()=>[s("div",L,[e(y,{modelValue:n.selectAll,"onUpdate:modelValue":t[0]||(t[0]=l=>n.selectAll=l),label:"Выбрать все",class:"text-weight-medium"},null,8,["modelValue"]),e(w),n.selectedItems.length>0?(d(),_(m,{key:0,flat:"",dense:"",color:"negative",icon:"delete",label:"Удалить выбранные"})):g("",!0)]),e(b,{class:"q-mb-md"}),s("div",O,[(d(!0),f(F,null,S(n.cartItems,l=>(d(),_(k,{key:l.id,class:"q-pa-none"},{default:a(()=>[e(c,{avatar:""},{default:a(()=>[e(y,{modelValue:n.selectedItems,"onUpdate:modelValue":t[1]||(t[1]=h=>n.selectedItems=h),val:l.id},null,8,["modelValue","val"])]),_:2},1024),e(c,{avatar:""},{default:a(()=>[e(C,{src:l.image,width:"80px",height:"80px",class:"rounded-borders"},null,8,["src"])]),_:2},1024),e(c,null,{default:a(()=>[e(p,{class:"text-weight-medium"},{default:a(()=>[v(o(l.name),1)]),_:2},1024),e(p,{caption:""},{default:a(()=>[v(o(l.description),1)]),_:2},1024),e(p,null,{default:a(()=>[l.discount?(d(),_(V,{key:0,color:"red"},{default:a(()=>[v(" -"+o(l.discount)+"% ",1)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024),e(c,{side:""},{default:a(()=>[s("div",E,[s("div",U,o(l.finalPrice)+"₽ ",1),l.discount?(d(),f("div",M,o(l.originalPrice)+"₽ ",1)):g("",!0)])]),_:2},1024),e(c,{side:""},{default:a(()=>[s("div",T,[e(m,{round:"",dense:"",flat:"",icon:"remove",size:"sm",disable:l.quantity<=1,onClick:h=>r.decreaseQuantity(l.id)},null,8,["disable","onClick"]),s("div",H,o(l.quantity)+" шт.",1),e(m,{round:"",dense:"",flat:"",icon:"add",size:"sm",onClick:h=>r.increaseQuantity(l.id)},null,8,["onClick"])])]),_:2},1024),e(c,{side:""},{default:a(()=>[e(m,{flat:"",round:"",dense:"",color:"grey",icon:"delete",onClick:h=>r.removeItem(l.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1}),s("div",J,[t[2]||(t[2]=s("div",{class:"text-h5 text-weight-bold q-mb-md"},"Рекомендуем",-1)),e(q)])]),s("div",K,[e(I,{flat:"",bordered:"",style:{position:"sticky",top:"0",left:"0"}},{default:a(()=>[e(P,null,{default:a(()=>[s("div",R,[e(m,{label:"Перейти к оформлению",color:"primary",size:"lg",icon:"shopping_cart",class:"full-width",unelevated:"",to:"/checkout/",disable:n.selectedItems.length===0},null,8,["disable"]),s("div",W,[s("div",X,[s("div",Y,"Товары ("+o(r.selectedItemsCount)+")",1),s("div",Z,o(r.totalOriginalPrice)+"₽",1)]),s("div",$,[t[3]||(t[3]=s("div",{class:"text-caption text-grey-7"},"Скидка",-1)),s("div",tt,"-"+o(r.totalDiscount)+"₽",1)]),s("div",et,[t[4]||(t[4]=s("div",{class:"text-caption text-grey-7"},"Доставка",-1)),s("div",st,[r.deliveryPrice===0?(d(),f("span",it,"Бесплатно")):(d(),f("span",lt,o(r.deliveryPrice)+"₽",1))])]),e(b),s("div",at,[t[5]||(t[5]=s("div",{class:"text-h6 text-weight-bold"},"Итого",-1)),s("div",ot,o(r.totalPrice)+"₽",1)])])])]),_:1})]),_:1})])])]),_:1})}const Ct=D(N,[["render",rt]]);export{Ct as default};
