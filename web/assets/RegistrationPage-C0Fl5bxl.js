import{Q as i}from"./QInput-Btel-I0Z.js";import{Q as w}from"./QBtn-pM70w-aC.js";import{A as b,Q as y}from"./Api-D8PYz5_c.js";import{C as V}from"./CenteredFormPage-DK4OjGo6.js";import{_ as k,k as c,l as a,m as l,q as n,f as t,A as m,n as p,u as s,F as d,t as u,p as h}from"./index-XG3ruBr1.js";import"./vm-CHOWyN6_.js";import"./render-CGS6HGWU.js";import"./QSpinner-CfICFpvI.js";import"./uid-Bzmka5Fh.js";import"./use-dark-Dv7WjADU.js";import"./focus-manager-BJWzFvJg.js";import"./private.use-form-C3esKNPw.js";import"./use-router-link-BvR_uW70.js";import"./index-B9ygI19o.js";import"./QPage-CVl4ANdV.js";const C={name:"RegistrationPage",components:{CenteredFormPage:V},data:function(){return{email:"",password:"",error_email:"",error_password:"",is_loading:!1}},methods:{onSubmit:async function(){this.is_loading=!0;let e=await b.post("/api/users/createUser",{email:this.email,password:this.password});e.status===200&&e.data.success?this.$router.push("/mail-sent"):(this.error_email=e.data.error_field==="email"?e.data.error:"",this.error_password=e.data.error_field==="password"?e.data.error:""),this.is_loading=!1}}},F={class:"text-red"},Q={class:"text-red"},B={style:{"margin-top":"10px"}};function P(e,o,S,N,R,f){const g=n("RouterLink"),_=n("CenteredFormPage");return a(),c(_,null,{default:l(()=>[t(y,{style:{"min-width":"320px"},onSubmit:f.onSubmit,class:"q-gutter-md"},{default:l(()=>[t(i,{modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=r=>e.email=r),label:"Email",rules:[r=>!!r||"Введите email",r=>r.length<256||"Email слишком длинный"]},null,8,["modelValue","rules"]),e.error_email?(a(),m(d,{key:0},[s("span",F,u(e.error_email),1),o[2]||(o[2]=s("br",null,null,-1))],64)):p("",!0),t(i,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=r=>e.password=r),label:"Пароль",type:"password",rules:[r=>!!r||"Введите пароль",r=>r.length<40||"Пароль слишком длинный"]},null,8,["modelValue","rules"]),e.error_password?(a(),m(d,{key:1},[s("span",Q,u(e.error_password),1),o[3]||(o[3]=s("br",null,null,-1))],64)):p("",!0),t(w,{style:{"margin-top":"10px"},loading:e.is_loading,label:"Зарегистрироваться",type:"submit",color:"primary"},null,8,["loading"]),s("p",B,[t(g,{to:"/login"},{default:l(()=>[...o[4]||(o[4]=[h("Войти",-1)])]),_:1})])]),_:1},8,["onSubmit"])]),_:1})}const J=k(C,[["render",P]]);export{J as default};
