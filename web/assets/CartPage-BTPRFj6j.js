import{Q,a as y}from"./QBreadcrumbs-Ds5e3H35.js";import{Q as x}from"./QCheckbox-DzJiOYgn.js";import{Q as w}from"./QSpace-BJ92OGgH.js";import{Q as m}from"./QBtn-B-GJa1GX.js";import{Q as b}from"./QSeparator-SiojuJyN.js";import{b as k,Q as c,a as _}from"./QItem-lZ05shjW.js";import{Q as C}from"./QImg-BRmRM1SI.js";import{Q as V}from"./QBadge-CsqcqbFA.js";import{Q as I,a as q}from"./QCard-D-J3qaMm.js";import{Q as B}from"./QPage-yTJLfUB9.js";import{D as j}from"./DemoProductsGrid-CeYN_zHw.js";import{_ as D,k as f,l as d,m as a,q as A,f as t,u as s,n as g,A as p,F,B as S,p as v,t as r,C as z}from"./index-cgLPpV2s.js";import"./vm-CqGj_DD0.js";import"./render-CaZ87jts.js";import"./use-router-link-BRJrr1cX.js";import"./use-dark-CyN1B-s9.js";import"./private.use-form-BojlAJrN.js";import"./QSpinner-Bv1sampE.js";import"./use-timeout-CUW7o2oj.js";const N={name:"CartPage",components:{DemoProductsGrid:j},data(){return{selectAll:!1,selectedItems:[],promoCode:"",cartItems:[{id:1,name:"Футболка темно-синяя однотонная",description:"Размер: M, Цвет: синий",image:"https://cdn.quasar.dev/img/parallax2.jpg",originalPrice:350,finalPrice:300,discount:10,quantity:2},{id:2,name:"Джинсы классические",description:"Размер: 32, Цвет: синий",image:"https://cdn.quasar.dev/img/parallax1.jpg",originalPrice:2500,finalPrice:2500,discount:0,quantity:1},{id:3,name:"Худи оверсайз",description:"Размер: L, Цвет: черный",image:"https://cdn.quasar.dev/img/mountains.jpg",originalPrice:1800,finalPrice:1500,discount:15,quantity:1}]}},computed:{selectedItemsCount(){return this.selectedItems.length},totalOriginalPrice(){return this.cartItems.filter(i=>this.selectedItems.includes(i.id)).reduce((i,e)=>i+e.originalPrice*e.quantity,0)},totalFinalPrice(){return this.cartItems.filter(i=>this.selectedItems.includes(i.id)).reduce((i,e)=>i+e.finalPrice*e.quantity,0)},totalDiscount(){return this.totalOriginalPrice-this.totalFinalPrice},deliveryPrice(){return this.totalFinalPrice>2e3?0:300},totalPrice(){return this.totalFinalPrice+this.deliveryPrice}},watch:{selectAll(i){i?this.selectedItems=this.cartItems.map(e=>e.id):this.selectedItems=[]},selectedItems(i){this.selectAll=i.length===this.cartItems.length&&this.cartItems.length>0}},methods:{increaseQuantity(i){const e=this.cartItems.find(u=>u.id===i);e&&e.quantity++},decreaseQuantity(i){const e=this.cartItems.find(u=>u.id===i);e&&e.quantity>1&&e.quantity--},removeItem(i){this.cartItems=this.cartItems.filter(e=>e.id!==i),this.selectedItems=this.selectedItems.filter(e=>e!==i)}}},G={class:"row q-col-gutter-xl"},L={class:"col-md-8 col-12"},O={class:"row items-center q-mb-md"},E={class:"column q-gutter-y-lg"},U={class:"column items-end q-gutter-y-xs"},M={class:"text-h6 text-weight-bold text-primary"},T={key:0,class:"text-caption text-strike text-grey"},H={class:"column items-center q-gutter-y-xs"},J={class:"text-weight-medium"},K={class:"q-mt-xl"},R={class:"column q-gutter-y-md"},W={class:"column q-gutter-y-sm"},X={class:"row items-center justify-between"},Y={class:"text-caption text-grey-7"},Z={class:"text-caption"},$={class:"row items-center justify-between"},ee={class:"text-caption text-green"},te={class:"row items-center justify-between"},se={class:"text-caption"},ie={key:0,class:"text-green"},le={key:1},ae={class:"row items-center justify-between"},re={class:"text-h5 text-weight-bold text-primary"};function oe(i,e,u,de,n,o){const P=A("DemoProductsGrid");return d(),f(B,{class:"q-pa-lg"},{default:a(()=>[t(Q,{class:"q-mb-xl"},{default:a(()=>[t(y,{label:"Главная",icon:"home"}),t(y,{label:"Корзина"})]),_:1}),e[6]||(e[6]=s("div",{class:"text-h4 text-weight-bold q-mb-lg"},"Корзина",-1)),s("div",G,[s("div",L,[t(I,{flat:"",bordered:""},{default:a(()=>[t(q,null,{default:a(()=>[s("div",O,[t(x,{modelValue:n.selectAll,"onUpdate:modelValue":e[0]||(e[0]=l=>n.selectAll=l),label:"Выбрать все",class:"text-weight-medium"},null,8,["modelValue"]),t(w),n.selectedItems.length>0?(d(),f(m,{key:0,flat:"",dense:"",color:"negative",icon:"delete",label:"Удалить выбранные"})):g("",!0)]),t(b,{class:"q-mb-md"}),s("div",E,[(d(!0),p(F,null,S(n.cartItems,l=>(d(),f(k,{key:l.id,class:"q-pa-none"},{default:a(()=>[t(c,{avatar:""},{default:a(()=>[t(x,{modelValue:n.selectedItems,"onUpdate:modelValue":e[1]||(e[1]=h=>n.selectedItems=h),val:l.id},null,8,["modelValue","val"])]),_:2},1024),t(c,{avatar:""},{default:a(()=>[t(C,{src:l.image,width:"80px",height:"80px",class:"rounded-borders"},null,8,["src"])]),_:2},1024),t(c,null,{default:a(()=>[t(_,{class:"text-weight-medium"},{default:a(()=>[v(r(l.name),1)]),_:2},1024),t(_,{caption:""},{default:a(()=>[v(r(l.description),1)]),_:2},1024),t(_,null,{default:a(()=>[l.discount?(d(),f(V,{key:0,color:"red"},{default:a(()=>[v(" -"+r(l.discount)+"% ",1)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024),t(c,{side:""},{default:a(()=>[s("div",U,[s("div",M,r(l.finalPrice)+"₽ ",1),l.discount?(d(),p("div",T,r(l.originalPrice)+"₽ ",1)):g("",!0)])]),_:2},1024),t(c,{side:""},{default:a(()=>[s("div",H,[t(m,{round:"",dense:"",flat:"",icon:"remove",size:"sm",disable:l.quantity<=1,onClick:h=>o.decreaseQuantity(l.id)},null,8,["disable","onClick"]),s("div",J,r(l.quantity)+" шт.",1),t(m,{round:"",dense:"",flat:"",icon:"add",size:"sm",onClick:h=>o.increaseQuantity(l.id)},null,8,["onClick"])])]),_:2},1024),t(c,{side:""},{default:a(()=>[t(m,{flat:"",round:"",dense:"",color:"grey",icon:"delete",onClick:h=>o.removeItem(l.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1}),s("div",K,[e[2]||(e[2]=s("div",{class:"text-h5 text-weight-bold q-mb-md"},"Рекомендуем",-1)),t(P)])]),s("div",{class:z(["col-md-4 col-12",i.$q.screen.lt.md?"order-first":""])},[t(I,{flat:"",bordered:"",style:{position:"sticky",top:"0",left:"0"}},{default:a(()=>[t(q,null,{default:a(()=>[s("div",R,[t(m,{label:"Перейти к оформлению",color:"primary",size:"lg",icon:"shopping_cart",class:"full-width",unelevated:"",to:"/checkout/",disable:n.selectedItems.length===0},null,8,["disable"]),s("div",W,[s("div",X,[s("div",Y,"Товары ("+r(o.selectedItemsCount)+")",1),s("div",Z,r(o.totalOriginalPrice)+"₽",1)]),s("div",$,[e[3]||(e[3]=s("div",{class:"text-caption text-grey-7"},"Скидка",-1)),s("div",ee,"-"+r(o.totalDiscount)+"₽",1)]),s("div",te,[e[4]||(e[4]=s("div",{class:"text-caption text-grey-7"},"Доставка",-1)),s("div",se,[o.deliveryPrice===0?(d(),p("span",ie,"Бесплатно")):(d(),p("span",le,r(o.deliveryPrice)+"₽",1))])]),t(b),s("div",ae,[e[5]||(e[5]=s("div",{class:"text-h6 text-weight-bold"},"Итого",-1)),s("div",re,r(o.totalPrice)+"₽",1)])])])]),_:1})]),_:1})],2)])]),_:1})}const Ce=D(N,[["render",oe]]);export{Ce as default};
